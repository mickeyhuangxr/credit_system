webpackJsonp([4],{"7/hJ":function(e,t){},I1BY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("/Pa7"),o=a("zL8q"),s={name:"index",data:function(){return{tableData:[],pages:1,rows:1,query:{pageNo:1,pageSize:10,name:""},status:"为生成合同",dialogFormVisible:!1,form:{},formLabelWidth:"100px",centerDialogVisible:!1,deletedata:""}},methods:{getList:function(){var e=this;Object(n.c)(this.query).then(function(t){console.log(t.data.data),e.tableData=t.data.data.data,e.pages=t.data.data.pages,e.rows=t.data.data.rows}).catch(function(e){console.log("终审查询数据获取失败")})},createFile:function(e){var t=this;console.log(e),Object(n.a)({id:e.id}).then(function(e){console.log(e.data),t.status="已生成合同",Object(o.Message)({message:"生成合同！！"})}).catch(function(e){console.log("生成合同失败")})},download:function(e){var t=this;console.log(e),Object(n.b)({id:e.id}).then(function(e){console.log(e.data),console.log("下载地址："+t.url+e.data.url),t.downloadUrlFile(t.url+e.data.url),Object(o.Message)({message:"下载合同！！"})}).catch(function(e){console.log("下载合同失败")})},downloadUrlFile:function(e){var t=this,a=new XMLHttpRequest;a.open("GET",e,!0),a.withCredentials=!0,a.responseType="blob",a.setRequestHeader("token",getToken()),console.log("111"),a.onload=function(){var e=a.responseURL.substring(a.responseURL.lastIndexOf("/")+1);t.saveAs(e,a.response)},a.send()},saveAs:function(e,t){var a=window.URL,n=new Blob([t]),o=document.createElement("a");o.href=a.createObjectURL(n),o.download=e,o.click()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.query.pageSize=e||this.query.pageSize,this.getList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.query.pageNo=e||this.query.pageNo,this.getList()}},filters:{getEducation:function(e){switch(e){case"college":return"大学";default:return"未知"}},statusFilter:function(e){return e?"已生成合同":"未生成合同"},statusTypeFilter:function(e){return e?"success":"primary"}},mounted:function(){this.getList(),this.handleCurrentChange()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{float:"left"},attrs:{id:"search"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.query.name,expression:"query.name"}],staticStyle:{height:"40px","border-radius":"3px",color:"cadetblue"},attrs:{type:"search",placeholder:"请输入名字",pattern:"/a|b/"},domProps:{value:e.query.name},on:{input:function(t){t.target.composing||e.$set(e.query,"name",t.target.value)}}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.getList}},[e._v("提交")])],1),e._v(" "),a("div",{staticStyle:{margin:"10px 0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"250"}},[a("el-table-column",{attrs:{fixed:"",prop:"loan_name",label:"姓名",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loan_card",label:"身份证",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"合同状态",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-tag",{attrs:{type:e._f("statusTypeFilter")(n.file_path)}},[e._v("\n              "+e._s(e._f("statusFilter")(n.file_path))+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary",disabled:t.row.file_path},on:{click:function(a){return e.createFile(t.row)}}},[e._v("生成合同")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success",disabled:!t.row.file_path},on:{click:function(a){return e.download(t.row)}}},[e._v("下载合同")])]}}])})],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.query.pageNo,"page-sizes":[10,20,30,40],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.rows},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("7/hJ")},"data-v-d4df11f8",null);t.default=r.exports}});
//# sourceMappingURL=4.fb004ac3ae0e68d419b9.js.map